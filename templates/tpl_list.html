{% extends "tpl_base.html" %}

{% block title %}
<span>&nbsp;<b>{{ application.title }}</b></span>
{% endblock %}

{% block menu %}
{% for tv in application.menu %}
<li><a
    href="/list/{{application.appid}}/{{tv.tableid}}/{{tv.viewid}}">{{application.tables[tv.tableid].views[tv.viewid].title}}</a>
</li>
{% endfor %}
{% endblock %}

{% block content %}
{% set vv = application.tables[tableid].views[viewid] %}
{% set key = application.tables[tableid].setting.key %}
<h1>{{vv.title}}</h1>
<table>
  <tr>
    {% for el in vv.velements %}
    <th>{{el.elid}}</th>
    {% endfor %}
  </tr>
  {% for record in records %}
  <tr>
    {% for el in vv.velements %}
    <td>
      {% if el.elid == key %}
        <a href="/view/{{application.appid}}/{{tableid}}/{{viewid}}/{{record[el.elid].value}}">{{record[el.elid].value}}</a>
      {% else %}
        {{record[el.elid].value}}
      {% endif %}
    </td>
    {% endfor %}
  </tr>
  {% endfor %}
</table>
{% block actions %}
{% for action in application.tables[tableid].views[viewid].actions %}
<li><a href="">{{ action.label }}</a></li>
{% endfor %}
{% endblock %}
{% endblock %}