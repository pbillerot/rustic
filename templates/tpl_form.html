{%- extends "tpl_base.html" -%}
{% import "tpl_form_elements.html" as macros %}
{%- block title -%}
<span><b>{{ application.title }}</b></span>
{%- endblock -%}

{%- block menu -%}
{%- for tv in application.menu -%}
<li><a href="/view/{{appid}}/{{tv.tableid}}/{{tv.viewid}}">{{application.tables[tv.tableid].views[tv.viewid].title}}</a>
</li>
{%- endfor -%}
{%- endblock -%}

{%- block navigation -%}
<span style="float: left; margin-left: 1em;">
  <a href="/view/{{appid}}/{{tableid}}/{{viewid}}">
    <button><- retour <b>{{view.title}}</button></b></button>
  </a></span>
{%- endblock -%}

{%- block boutons -%}
<span style="float: right;">
  {%- if view.form_edit -%}<a href="/edit/{{appid}}/{{tableid}}/{{viewid}}/{{view.form_edit}}/{{id}}" title="Modifier">
    <button>Modifier</button></a>
  {%- endif -%}
  {%- if view.deletable -%}&nbsp;<button onclick="if (window.confirm('Veuillez confirmer la suppression de cet article')) { document.forms['myform'].submit(); }">Supprimer...</button>
  {%- endif -%}
</span>
{%- endblock -%}

{%- block content -%}
<h1>{{form.title}}</h1>
<table>
  <tr>
    <td>
      <table>
        {%- for vel in form.velements -%}
        <tr>
          {{ macros::form_elements(el=record[vel.elid]) }}
        </tr>
        {%- endfor -%}
      </table>
    </td>
  </tr>
</table>
{%- endblock -%}
{%- block actions -%}
<!-- Actions du formulaire -->
{%- for action in application.tables[tableid].forms[formid].actions -%}
<li><a href="/actionf/{{appid}}/{{tableid}}/{{viewid}}/{{loop.index0}}">{{ action.label }}</a></li>
{%- endfor -%}
{%- endblock -%}
{%- block forms -%}
{%- if view.deletable -%}
<form id="myform" action="/delete/{{appid}}/{{tableid}}/{{viewid}}/{{id}}" method="post">
</form>
{%- endif -%}
{%- endblock -%}